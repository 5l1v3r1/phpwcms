/*!
 * phpwcms content management system
 *
 * @author Oliver Georgi <og@phpwcms.org>
 * @copyright Copyright (c) 2002-2016, Oliver Georgi
 * @license http://opensource.org/licenses/GPL-2.0 GNU GPL-2
 * @link http://www.phpwcms.org
 *
 */
function login(e){return 2==e.json.value&&""==e.form_password.value&&""==e.form_loginname.value?(e.submit(),!0):(0==e.json.value,e.form_password.value&&e.form_loginname.value?(e.md5pass.value=hex_md5(e.form_password.value),e.form_password.value="",e.json.value=1,!0):(showLayer("jserr"),!1))}function MM_findObj(e,t){var n,a,o;for(t||(t=document),(n=e.indexOf("?"))>0&&parent.frames.length&&(t=parent.frames[e.substring(n+1)].document,e=e.substring(0,n)),!(o=t[e])&&t.all&&(o=t.all[e]),a=0;!o&&a<t.forms.length;a++)o=t.forms[a][e];for(a=0;!o&&t.layers&&a<t.layers.length;a++)o=MM_findObj(e,t.layers[a].document);return!o&&t.getElementById&&(o=t.getElementById(e)),o}function MM_swapImage(){var e,t=0,n,a=MM_swapImage.arguments;for(document.MM_sr=[],e=0;e<a.length-2;e+=3)null!=(n=MM_findObj(a[e]))&&(document.MM_sr[t++]=n,n.oSrc||(n.oSrc=n.src),n.src=a[e+2])}function clearText(e){e.defaultValue==e.value&&(e.value="")}function confirmGoUrl(e,t){confirm(e)&&(location.href=t)}function wordcount(e){var t=Trim(e);return""==t?0:(t=t.split(" "),t.length)}function LTrim(e){var t=new String(" \t\n\r"),n=new String(e);if(t.indexOf(n.charAt(0))!=-1)for(var a=0,o=n.length;a<o&&t.indexOf(n.charAt(a))!=-1;)a++,n=n.substring(a,o);return n}function RTrim(e){var t=new String(" \t\n\r"),n=new String(e);if(t.indexOf(n.charAt(n.length-1))!=-1)for(var a=n.length-1;a>=0&&t.indexOf(n.charAt(a))!=-1;)a--,n=n.substring(0,a+1);return n}function Trim(e){return RTrim(LTrim(e))}function set_chatlist(e){document.sendchatmessage.chatlist.value=e,document.sendchatmessage.submit()}function flevPopupLink(){var e=arguments,t=window.open(e[0],e[1],e[2]),n=e.length>3&&e[3];n&&t.focus(),document.MM_returnValue=!1}function MM_showHideLayers(){var e,t,n,a,o=MM_showHideLayers.arguments;for(e=0;e<o.length-2;e+=3)null!=(a=MM_findObj(o[e]))&&(n=o[e+2],a.style&&(a=a.style,n="show"==n?"visible":"hide"==n?"hidden":n),a.visibility=n)}function tmt_winOpen(u,id,f,df){null==eval(id)||eval(id+".closed")?(eval(id+"=window.open('"+u+"','"+id+"','"+f+"')"),eval(id+".focus()")):df?eval(id+".focus()"):(eval(id+"=window.open('"+u+"','"+id+"','"+f+"')"),eval(id+".focus()"))}function tmt_winControl(id,c){var d=null==eval(id)||eval(id+".closed");d||eval(id+"."+c)}function get_cookie(e){var t=e+"=",n="";if(document.cookie.length>0){var a=document.cookie.indexOf(t);if(a!=-1){a+=t.length;var o=document.cookie.indexOf(";",a);o==-1&&(o=document.cookie.length),n=decodeURIComponent(document.cookie.substring(a,o))}}return n}function write_cookie(e){e?window.document.cookie="chatstring="+window.document.sendchatmessage.chatmsg.value:window.document.cookie="chatstring="}function cut(e,t){e.value.length>t&&(e.value=e.value.substr(0,t))}function changeImagePos(e,t){t?document.article.cimage_pos.selectedIndex=e:document.articlecontent.cimage_pos.selectedIndex=e;for(var n=0;n<=9;n++)n==e?MM_swapImage("imgpos"+n,"","img/symbole/content_selected.gif",0):MM_swapImage("imgpos"+n,"","img/leer.gif",0)}function changeImagePosMenu(e){if(e)var t=document.article.cimage_pos.selectedIndex;else var t=document.articlecontent.cimage_pos.selectedIndex;for(var n=0;n<=9;n++)n==t?MM_swapImage("imgpos"+n,"","img/symbole/content_selected.gif",0):MM_swapImage("imgpos"+n,"","img/leer.gif",0);e?document.article.cimage_pos.focus():document.articlecontent.cimage_pos.focus()}function switchToggleFTP(e){return"0"==e.value?e.value="1":e.value="0",parseInt(e.value,10)}function toggleAllFTP(e,t){for(var n=0;n<e.length;n++)e[n].checked=!!t}function int_only(e){return e=parseInt(e),e<0&&(e*=-1),e?e+"":""}function hideLayer(e){toggleDisplayById(e,"none")}function showLayer(e){toggleDisplayById(e,"")}function toggleDisplayById(e,t){document.getElementById?document.getElementById(e).style.display=t:document.all?document.all[e].style.display=t:document.layers&&(document.layers[e].display=t)}function doMapChange(){document.articlecontent.cmap_location_edited.value="1"}function subrstr(e,t){return e.substr(e.length-t)}function setCursorPos(e){e.createTextRange&&(e.cursorPos=document.selection.createRange().duplicate())}function insertAtCursorPos(e,t){if(e.focus(),document.all)if(e.createTextRange&&e.cursorPos){var n=e.cursorPos;n.text=" "==n.text.charAt(n.text.length-1)?t+" ":t}else e.value=e.value+t;else if(e.setSelectionRange){var a=e.selectionStart,o=e.selectionEnd,r=e.value.substring(0,a),l=e.value.substring(o);e.value=r+t+l}else alert("This version of Mozilla based browser does not support setSelectionRange")}function getFieldById(e){var t;return document.getElementById&&null!=document.getElementById(e)?document.getElementById(e):document.layers&&null!=document.layers[e]?document.layers[e]:!document.all||document.all(e)}function getObjectById(e){return document.getElementById&&null!=document.getElementById(e)?document.getElementById(e):document.layers&&null!=document.layers[e]?document.layers[e]:!!document.all&&document.all(e)}function switchDisabled(e){return e.disabled=!e.disabled,!1}function enableStatusMessage(e,t,n){if(document.getElementById&&null!=document.getElementById(e))var a=document.getElementById(e);else{if(!document.layers||null==document.layers[e])return!0;var a=document.layers[e]}return n&&(a.innerHTML=n),a.style.display=1==t?"block":"none",!0}function create_alias(e,t,n){var e=e.toUpperCase();if(e=e.toLowerCase(),e=e.replace(/\[br\]/g," "),e=e.replace(/__/g," "),e=e.replace(/[\u00E0\u00E1\u00E2\u00E3\u00E5]/g,"a"),e=e.replace(/[\u00E7]/g,"c"),e=e.replace(/[\u00E8\u00E9\u00EA\u00EB]/g,"e"),e=e.replace(/[\u00EC\u00ED\u00EE\u00EF]/g,"i"),e=e.replace(/[\u00F2\u00F3\u00F4\u00F5\u00F8]/g,"o"),e=e.replace(/[\u00F9\u00FA\u00FB]/g,"u"),e=e.replace(/[\u00FD\u00FF]/g,"y"),e=e.replace(/[\u00F1]/g,"n"),e=e.replace(/[\u0153\u00F6]/g,"oe"),e=e.replace(/[\u00E6\u00E4]/g,"ae"),e=e.replace(/[\u00DF]/g,"ss"),e=e.replace(/[\u00FC]/g,"ue"),e=e.replace(/\s+/g,"-"),e=e.replace(/-+\/+-+/g,"/"),aliasAllowSlashes?e=e.replace(/[^a-z0-9_\-\/\.]+/g,""):(e=e.replace("/","-"),e=e.replace(/[^a-z0-9_\-\.]+/g,"")),e=e.replace(/\-+/g,"-"),e=e.replace(/\/+/g,"/"),e=e.replace(/_+/g,"_"),e=e.replace(/^-+|-+$/g,""),e=e.replace(/^\/+|\/+$/g,""),e=e.replace(/^-+|-+$/g,""),1==n){var a=e.charAt(0);e=a.toUpperCase()+e.slice(1)}return e}function openFileBrowser(e){null!=e&&""!=e&&(window.imageBrowser&&temp_url!=e&&tmt_winControl("imageBrowser","close()"),tmt_winOpen(e,"imageBrowser","width="+fbw+",height="+fbh+",left=8,top=8,scrollbars=yes,resizable=yes",1),temp_url=e)}function set_article_alias(e,t,n){if("struct"==t)var a="acat_name",o="acat_alias";else var a="article_title",o="article_alias";var r=getObjectById(o);if(e&&""!=r.value)return!1;var l=getObjectById(a);return r.value=create_alias((n?n+"/":"")+l.value),!1}function flush_image_cache(e,t){return e.addClass("ajax-running"),new Ajax(t,{method:"get",onComplete:function(){e.removeClass("ajax-running")}}).request(),!1}var imageBrowser,uploadWin,temp_url,fbw=450,fbh=575;void 0!==screen.width&&(fbw=Math.ceil(Math.max(screen.width/5,fbw))),void 0!==screen.height&&(fbh=Math.ceil(Math.max(screen.height/2,fbh)));var autosizeTextareas=[];"undefined"==typeof jQuery?window.addEvent("domready",function(){autosizeTextareas=$$("textarea.autosize"),autosizeTextareas.length&&autosize(autosizeTextareas)}):$(function(){autosizeTextareas=$("textarea.autosize"),autosizeTextareas.length&&autosize(autosizeTextareas)});